_[Ссылка](https://github.com/netology-code/devkub-homeworks/blob/main/11-microservices-03-approaches.md) на задания_

Не очень понял, что необходимо сделать.  
Просто предложу список программного обеспечения для обеспечения требований.

### Задание 1

> Облачная система;

Используем Yandex Cloud. Локальное облако, которое можно оплатить

> Система контроля версий Git;

Код можно хранить в GitHub, он позволяет создавать private репозитории, если нужно

> Репозиторий на каждый сервис;

GitHub поддерживает неограниченное количество репозиториев

> Запуск сборки по событию из системы контроля версий;

Для CI можно использовать Jenkins. При помощи Multibranch проекта можно запускать сборку по коммиту 

> Запуск сборки по кнопке с указанием параметров;

Также в Jenkins можно создать задачу с возможностью задания параметров и использовать их при сборке

> Возможность привязать настройки к каждой сборке;

Можно делать сборку по pipeline из Jenkinsfile в репозитории. В нем можно задать параметры и менять их при каждом коммите. Они будут использоваться при сборке.  

> Возможность создания шаблонов для различных конфигураций сборок;

Можно создать базовую задачу по сборке (к примеру, содержащую шаг с вызовом Maven), а потом создавать новые задачи путем клонирования текущей.  

Также для данного пункта лучше может подойти TeamCity с её Build Configuration Template. Сборка будет описана в родительском проекте, а в проектах потомках поля шаблона можно будет переопределять. Причем изменения в шаблоне могут быть подтянуты потомками.

В случае с Jenkins каждый раз придется заново клонироваться от базовой задачи, чтобы она была актуальной, а изменения в потомках поддерживать вручную.

> Возможность безопасного хранения секретных данных: пароли, ключи доступа;

Jenkins позволяет сохранить данные доступа в безопасном виде. После сохранения они нигде не будут отображаться, только их внутренние идентификаторы.

> Несколько конфигураций для сборки из одного репозитория;

Здесь Jenkins тоже подойдет, можно написать ScriptedPipeline, который будет делать разные шаги при сборке на основе значений параметров или названий веток

> Кастомные шаги при сборке;

Возможность запуска дополнительных утилит или команд в Jenkins также есть. 

> Собственные докер образы для сборки проектов;

Свои докер образы можно хранить на докерхабе, если разрешено. Иначе можем поднять Nexus для создания своего Docker Registry. Заодно в нем можно будет хранить и другие артефакты

> Возможность развернуть агентов сборки на собственных серверах;

Jenkins позволяет подключать себе дополнительные сборщики. Нужно просто запустить на хосте агент

> Возможность параллельного запуска нескольких сборок;

В настройках Jenkins можно задать, сколько на хосте может работать параллельных сборщиков. Если их числа недостаточно, можно добавить еще хост и запустить на нем агент

> Возможность параллельного запуска тестов;

Jenkins легко расширяется за счет плагинов. К примеру, для данного пункта можно использовать [Parallel Test Executor](https://plugins.jenkins.io/parallel-test-executor/)

---

### Задание 2

> Сбор логов в центральное хранилище со всех хостов обслуживающих систему;

Сборку логов можно осуществлять при помощи Vector, LightHouse, Clickhouse   
Также можно использовать Elasticsearch, Logstash, Kibana, но для них нужно больше ресурсов

Вместо Vector и Logstash есть еще много альтернатив: fluentbit, fluentd, [file.d](https://github.com/ozontech/file.d)...  

> Минимальные требования к приложениям, сбор логов из stdout;

Vector поддерживает чтение логов из stdout 

> Гарантированная доставка логов до центрального хранилища;

Vector поддерживает возможность настройки буфера на диске, чтобы не потерять данные, если Clickhouse по какой-то причине не способен принимать на вход данные

> Обеспечение поиска и фильтрации по записям логов;

Vector позволяет преобразовывать логи и класть их в Clickhouse по конкретным полям. Clickhouse легко проведет поиск по данным

> Обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;

Lighthouse - довольно простой GUI, если он не подходит, то можно рассмотреть другие [интерфейсы](https://clickhouse.com/docs/ru/interfaces/third-party/gui/)

> Возможность дать ссылку на сохраненный поиск по записям логов;

К сожалению, не нашел, какой интерфейс для Clickhouse, который позволяет сохранить поиск. Kibana это точно позволяет.  
В качестве альтернативы сохранению результатам поиска можно делиться запросами поиска или файлами с экспортируемыми выборками.  
Если это обязательное условие, то в интернете попадается информация о соединении Clickhouse и Kibana  

---

### Задание 3

> Сбор метрик со всех хостов, обслуживающих систему;

Будем использовать Prometheus.  

> Сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;

Для мониторинга параметров хостов подключим к нему node-exporter, все эти метрики будут доступны

> Сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;

Можно написать кастомный экспортер, который будет парсить вывод `top`, `iotop`, `vmstat` и отдавать данные в Prometheus

> Сбор метрик, специфичных для каждого сервиса;

При разработке сервиса нужно будет добавить возможность возвращать параметры приложения в формате метрик Prometheus и подключить их к нему 

> Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;

В качестве интерфейса возьмем Grafana. Добавим Prometheus как Data Source и будем писать запросы к его данным на PromQL

> Пользовательский интерфейс с возможность настраивать различные панели для отслеживания состояния системы;

Grafana поддерживает создание Dashboards с различными панелями в них, а также уже имеет возможность установки готовых досок

---
