
_[Ссылка](https://github.com/netology-code/devkub-homeworks/blob/main/12-kubernetes-03-install-part-1.md) на задания_

### Задание 1

> Сначала сделайте расчет всех необходимых ресурсов.

- База (4гб 1 ядро) * 3 = 12гб 3 ядра
- Кеш (4гб 1 ядро) * 3 = 12гб 3 ядра
- Фронтенд (50мб 0.2 ядра) * 5 = 250мб 1 ядро
- Бекенд (600мб 1 ядро) * 10 = 6гб 10 ядер
---
**Итого: 30.25гб 17 ядер**

> Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.

- Так как БД должна быть отказоустойчивой, она должна располагаться на разных нодах. Под 3 экземпляра как раз возьмем 3 ноды  
- Если предположить, что в кеш будут помещаться данные, выбранные из БД, то для обработки одного запроса будет задействован либо кеш, либо БД. Можно поставить 3 экземпляра кеша на 3 имеющиеся ноды рядом с БД
- Процессы фронтенда и бекенда можно совместно разделить еще на 3 ноды. По 5 экземпляров на ноду
---
**Итого: 6 нод**

> Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.

- Допустим, из строя выходит одна нода с базой и кешем и одна нода с фронтендом и бекендом.
- Оставшиеся ноды делят нагрузку вышедшей из строя
- Для одного экземпляра базы и кеша это + 8гб 2 ядра (пополам)
- Для фронтенда и бекенда это + 100мб 0.4 ядра, 2.4гб 4 ядра соответственно (пополам)
---
**Итого: + 10.5гб 6.4 ядра (общая 40.75гб 23.4 ядра)**

> Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.

- Рассчитываю запускать базу и кеш прямо на хосте. Потребление OS буду считать 0
- Фронтенд и бекенд будем запускать в кластере Kubernetes. Все 3 ноды будут master/worker + (3гб 3 ядра) * 3
---
**Итого: + 9гб 9 ядер (общая 49.75гб 32.4 ядра)**

> Рассчитайте итоговые цифры.

Общий результат: 49.75гб 32.4 ядра на 6 нод

> В результате должно быть указано количество нод и их параметры.

**Всего 6 нод:**

- **3 ноды для БД и кеша: 12гб 3 ядра**   

_на каждой запущена база, кеш, и есть запас на ресурсы вышедшего из строя экземпляра базы или кеша для запуска их на разных нодах_

4гб 1 ядро (1 база), 4гб 1 ядро (1 кеш), 4гб 1 ядро (1 база или 1 кеш)

- **3 ноды в кластере Kubernetes для фронтенд и бекенд: 7гб 10 ядер**

_на каждой ноде запущен master Kubernetes, 2(так как всего 5 делим на 3, то берем по максимуму) экземпляра фронтенда, 4 (10/3) экземпляра бекенда, и есть запас на 4 бекенда и 2 фронтенда в случае выхода из строя одной ноды с условием запуска их на разных нодах (2 бекенда, 1 фронтенд на каждой)_

150мб 0.6 ядра (3 фронт), 3.6гб 6 ядер (6 бек), 3гб 3 ядра (мастер + воркер кубера)

---
Итого: 57гб 33 ядра. Получилось больше по памяти, чем было в предыдущем пункте

---