
_[Ссылка](https://github.com/netology-code/mnt-homeworks/tree/MNT-13/10-monitoring-01-base) на задания_

### Задание 1

1. Загрузка ЦПУ: среднюю LA и отдельно по каждому ядру
> Система делает вычисления, ей требуется процессор. Это основная метрика. Возможно, вычисления будут не эффективно использовать проц, для этого будем смотреть данные в разрезе ядер
2. Место на разделах диска
> Система формирует файлы на диске. В какой-то момент для отчета места может не хватить. Также могут создаваться какие-то временные файлы, которые могут забить место
3. Количество inode на разделах
> Запись на диск может быть заблокирована нехваткой inode. Система вернет ошибку, если они кончатся
4. Локальная доступность http порта
> Система не сможет вернуть ответ, если будет недоступен http порт сервера
5. Удаленная доступность http порта
> Порт может быть доступен локально, но внешние пользователи будут заблокированы файерволом
6. Использование RAM
> При вычислении может использоваться память для каких-то данных
7. Использование SWAP
> Может не хватить памяти для работы, при выходе в SWAP запросы могут обрабатываться медленнее
8. Запущенность самого процесса, который производит вычисления
> Если процесс не будет запущен, некому будет отвечать на запросы
9. Запущенность балансировщика, если есть
> Обработка http трафика может быть проходить через балансировщик, его запущенность тоже нужно мониторить
10. Валидность SSL сертификата, при наличии
> Запросы могут отбиваться ошибками, если клиенты не доверяют серверу
11. Время ответа на http запрос
> Если запрос обрабатывается долго, клиент может разорвать подключение по таймауту
12. Количество обрабатываемых запросов в единицу времени
> Система может лечь под нагрузкой, стоит понимать, какая это нагрузка
13. Возвращаемые коды http ответов на запросы
> При возврате ошибочного кода клиент не получит сервис
14. Скорость работы I\O
> Формирование файлов может тормозить
15. Мониторить сами формируемые отчеты
> При возникновении какойй-то ошибки в работе программы, может сформироваться кривой файл. К примеру, обрезанный в конце
16. Проверять системные логи
> OS может вызвать OOMkiller, TrafficController или что-то из cgroups и завалить обработку запросов
17. Во что резолвится DNS
> Проблемы могут быть и не в самой системе, а на уровень выше. Если хостнейм будет резолвиться во что-то левое, то сервис предоставлен не будет

---

### Задание 2

Менеджеру расскажем про SLA, SLO, SLI  

*Необходимо согласовать с клиентом SLO*  
Сколько процентов запросов должны обрабатываться корректно. Вдруг, сервис должен работать с 10-19 и данные отчеты не критичны.  

*Необходимо согласовать с клиентом SLA*  
Какие последствия будут для нас, если клиент не получит ответ на запрос или свой отчет.  

*Рассчитаем SLI*  
Проверим на основе данных мониторинга или какой-то другой статистики, на сколько реально качество сервиса соответствует согласованному с клиентом

---

### Задание 3

Предложу разработчикам использовать бесплатную онлайн платформу по сбору логов, подходящую им по требованиям.  
К примеру, можно посмотреть некоторый списочек [здесь](https://sematext.com/blog/log-analysis-tools/)  

Похоже, стоит рассматривать:
* Splunk - ограничение в 500 мб в день  
* Papertrail - ограничение поиска в 48 часов, хранение 7 дней, размер логов 50 мб в месяц

У остальных бесплатные версии только на определенное время. Чтобы не приходилось пересоздавать аккаунт раз в 2 недели, их лучше не использовать.

---

### Задание 4

Думаю, что ошибка в формуле. В ней не учитываются коды HTTP редиректов   
Правильная формула: `(summ_2xx_requests + summ_3xx_requests)/summ_all_requests`

---