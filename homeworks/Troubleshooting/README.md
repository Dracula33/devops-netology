### Задача 1

1. Остановить долгую операцию
* получить список операций, выполняющихся в настоящий момент, при помощи `$currentOp`
* найти значение `$currentOp.opid` для нужной сессии 
* передать значение opid в метод `db.killOp()`

2. Возможные действия для решения проблемы:
* проверить наличие блокировок через документы `locks` или `globalLock`
* проверить план запроса через `db.collection.explain()`
* если нужно, создать дополнительный индекс через `db.collection.createIndex().`

---
### Задача 2

Используется _active_ способ очищения просроченных записей из redis.  
В процессе запуска алгоритма выяснилось, что больше чем 25% ключей просрочено, и их нужно удалить из памяти.  
Алгоритм зацикливается до тех пор, пока не удалит нужное для понижения процента число ключей.  
Redis - однопоточное приложение, из-за этого зацикливание удаления просроченных записей блокирует вставку.

---
### Задача 3

Похоже, данная ошибка возникает, когда запрос отрабатывает дольше, чем задано в настройке `DBMS connection read time out`  
Для решения проблемы можно:
* увеличить таймаут на получение ответа на запрос
* через EXPLAIN проверить план запросов, при выполнении которых возникает эта ошибка
* скорректировать план запроса через добавление индексов или хинтов

---
### Задача 4

Ошибка означает, что операционной системе не хватает памяти, и системный процесс _oom-killer_ пытается её высвободить путем остановки самого ресурсопотребляемого процесса по его мнению.  

Пути решения:
* ограничить потребление памяти СУБД в настроечном файле _postgresql.conf_
* вынести СУБД на отдельный сервер, если рядом работают другие процессы
* добавить памяти в сервер
* посмотреть, какие операции выполняет СУБД. Возможно, кто-то выполняет операцию, которая потребляет много памяти (к примеру, DELETE многих миллионов записей за 1 транзакцию). Изменить её.

Также можно отключить oom-killer, но это - неправильное решение. В этом случае память также может закончиться, но OS её высвободить уже не сможет, сервер зависнет

---